<!DOCTYPE html><html lang="en" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[Flask] Bcrypt를 이용한 비밀번호 암호화 &amp; JWT 인증 기반 로그인" /><meta name="author" content="0da" /><meta property="og:locale" content="en" /><meta name="description" content="Bcrypt" /><meta property="og:description" content="Bcrypt" /><link rel="canonical" href="https://teamscp.github.io/posts/Flask_Bcrypt_JWT/" /><meta property="og:url" content="https://teamscp.github.io/posts/Flask_Bcrypt_JWT/" /><meta property="og:site_name" content="SCP Tech Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-08-23T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Flask] Bcrypt를 이용한 비밀번호 암호화 &amp; JWT 인증 기반 로그인" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@0da" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"0da"},"dateModified":"2022-08-24T00:00:00+00:00","datePublished":"2022-08-23T00:00:00+00:00","description":"Bcrypt","headline":"[Flask] Bcrypt를 이용한 비밀번호 암호화 &amp; JWT 인증 기반 로그인","mainEntityOfPage":{"@type":"WebPage","@id":"https://teamscp.github.io/posts/Flask_Bcrypt_JWT/"},"url":"https://teamscp.github.io/posts/Flask_Bcrypt_JWT/"}</script><title>[Flask] Bcrypt를 이용한 비밀번호 암호화 & JWT 인증 기반 로그인 | SCP Tech Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="mask-icon" href="/assets/img/favicons/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/favicons/SCP_%EB%9D%BC%EC%9D%B83-big.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">SCP Tech Blog</a></div><div class="site-subtitle font-italic"></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/TeamSCP" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://www.facebook.com/HackingTeamSCP" aria-label="facebook" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Flask] Bcrypt를 이용한 비밀번호 암호화 & JWT 인증 기반 로그인</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Flask] Bcrypt를 이용한 비밀번호 암호화 & JWT 인증 기반 로그인</h1><div class="post-meta text-muted"><div> By <em> 0da </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1661212800" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-08-23 </em> </span> <span> Updated <em class="timeago" data-ts="1661299200" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-08-24 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2202 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><h1 id="bcrypt">Bcrypt</h1><hr /><p>비밀번호를 저장하는 목적으로 설계된 단방향 해시 함수이다. 단방향 해시 함수는 암호화는 가능하지만 복호화가 불가능하다. 회원가입 시 사용자가 입력한 비밀번호를 그대로 DB에 저장하는 것은 안전하지 않기 때문에 단방향 암호화를 거친 뒤 DB에 저장해야 한다.</p><p><br /></p><h3 id="암호화가-왜-필요할까"><span class="mr-2">암호화가 왜 필요할까?</span><a href="#암호화가-왜-필요할까" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><hr /><ul><li><p>사용자가 입력한 비밀번호가 DB에 그대로 평문 저장된다면 DB가 해킹을 당할 경우 유저의 비밀번호가 그대로 노출된다.</p><li><p>외부 해킹이 아니더라도 내부 인력이 유저들의 비밀번호를 볼 수 있게 된다.</p><li><p>비밀번호를 단방향 암호화하여 DB에 저장하면 해커가 DB를 획득하더라도 복호화할 수 없기 때문에 평문 비밀번호 획득이 불가능하다.</p></ul><p><br /></p><h3 id="bcrypt-암호화-진행-과정"><span class="mr-2">Bcrypt 암호화 진행 과정</span><a href="#bcrypt-암호화-진행-과정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><hr /><p><img data-src="https://user-images.githubusercontent.com/40850499/185931220-99e8a54f-e26c-44c1-8c47-c1561833015f.png" alt="6" data-proofer-ignore></p><p><br /></p><h3 id="bcrypt-비밀번호-암호화-실습"><span class="mr-2">Bcrypt 비밀번호 암호화 실습</span><a href="#bcrypt-비밀번호-암호화-실습" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><hr /><p><strong>HTML</strong></p><p>register.html</p><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">id=</span><span class="s">"registerForm"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2&gt;</span>회원가입<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"user_id"</span><span class="nt">&gt;</span>아이디<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"user_id"</span> <span class="na">name=</span><span class="s">"user_id"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"user_pw"</span><span class="nt">&gt;</span>비밀번호<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;input</span>
          <span class="na">type=</span><span class="s">"password"</span>
          <span class="na">class=</span><span class="s">"form-control"</span>
          <span class="na">id=</span><span class="s">"user_pw"</span>
          <span class="na">name=</span><span class="s">"user_pw"</span>
        <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span><span class="nt">&gt;</span>회원가입<span class="nt">&lt;/button&gt;</span>
   <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></table></code></div></div><p><br /></p><p>login.html</p><div class="language-html highlighter-rouge"><div class="code-header"> <span data-label-text="HTML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">id=</span><span class="s">"loginForm"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;h2&gt;</span>로그인<span class="nt">&lt;/h2&gt;</span>
      <span class="nt">&lt;br</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"user_id"</span><span class="nt">&gt;</span>아이디<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">id=</span><span class="s">"user_id"</span> <span class="na">name=</span><span class="s">"user_id"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"user_pw"</span><span class="nt">&gt;</span>비밀번호<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;input</span>
          <span class="na">type=</span><span class="s">"password"</span>
          <span class="na">class=</span><span class="s">"form-control"</span>
          <span class="na">id=</span><span class="s">"user_pw"</span>
          <span class="na">name=</span><span class="s">"user_pw"</span>
        <span class="nt">/&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span><span class="nt">&gt;</span>로그인<span class="nt">&lt;/button&gt;</span>
   <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</pre></table></code></div></div><p><br /></p><p><strong>.env</strong></p><p>민감한 정보가 코드에 노출되는 것을 방지하기 위하여 민감 정보는 .env에 설정하고, app.py에서 os.getenv()를 통해 접근할 수 있도록 하였다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>HOST=localhost
USER=mysql ID
PASSWD=mysql ID의 암호
DB=접속할 데이터베이스
</pre></table></code></div></div><p><br /> <strong>app.py</strong></p><ul><li><p>python version 3.8.10</p><li><p>bcrypt version 3.2.2</p></ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">make_response</span>
<span class="kn">import</span> <span class="n">os</span>
<span class="kn">import</span> <span class="n">pymysql</span>
<span class="kn">import</span> <span class="n">bcrypt</span>

<span class="n">app</span> <span class="o">=</span> <span class="nc">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="n">HOST</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="s">'HOST'</span><span class="p">)</span>
<span class="n">USER</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="s">'USER'</span><span class="p">)</span>
<span class="n">PASSWD</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="s">'PASSWD'</span><span class="p">)</span>
<span class="n">DB</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="s">'DB'</span><span class="p">)</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">pymysql</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">HOST</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">USER</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="n">PASSWD</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="n">DB</span><span class="p">,</span> <span class="n">charset</span><span class="o">=</span><span class="s">"utf8"</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">'/'</span><span class="p">,</span> <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">render_template</span><span class="p">(</span><span class="s">'register.html'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="nf">cursor</span><span class="p">()</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'user_id'</span><span class="p">)</span>
        <span class="n">pw</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'user_pw'</span><span class="p">)</span>
        <span class="n">pw</span> <span class="o">=</span> <span class="n">pw</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
        <span class="n">bcrypt_hash</span> <span class="o">=</span> <span class="n">bcrypt</span><span class="p">.</span><span class="nf">hashpw</span><span class="p">(</span><span class="n">pw</span><span class="p">,</span> <span class="n">bcrypt</span><span class="p">.</span><span class="nf">gensalt</span><span class="p">())</span>
        <span class="n">decode_hash</span> <span class="o">=</span> <span class="n">bcrypt_hash</span><span class="p">.</span><span class="nf">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
        <span class="n">sql</span> <span class="o">=</span> <span class="s">"INSERT INTO user (id, pw) values ('%s','%s')"</span> <span class="o">%</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">decode_hash</span><span class="p">)</span>
        <span class="n">cur</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
        <span class="n">db</span><span class="p">.</span><span class="nf">commit</span><span class="p">()</span>
        <span class="n">cur</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>

        <span class="k">return</span> <span class="nf">redirect</span><span class="p">(</span><span class="s">'/login'</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">'/login'</span><span class="p">,</span> <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s">'GET'</span><span class="p">,</span><span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">render_template</span><span class="p">(</span><span class="s">'login.html'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'user_id'</span><span class="p">)</span>
        <span class="n">pw</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'user_pw'</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="nf">cursor</span><span class="p">()</span>
        <span class="n">cur</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s">'SELECT * FROM user WHERE id = %s'</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">cur</span><span class="p">.</span><span class="nf">fetchone</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">user_id</span><span class="p">:</span>
            <span class="n">cur</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s">'SELECT pw FROM user WHERE id = %s'</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
            <span class="n">select_pw</span> <span class="o">=</span> <span class="n">cur</span><span class="p">.</span><span class="nf">fetchone</span><span class="p">()</span>
            <span class="n">user_pw_hash</span> <span class="o">=</span> <span class="n">select_pw</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">pw</span> <span class="o">=</span> <span class="n">pw</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
            <span class="n">user_pw_hash</span> <span class="o">=</span> <span class="n">user_pw_hash</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
            <span class="n">check</span> <span class="o">=</span> <span class="n">bcrypt</span><span class="p">.</span><span class="nf">checkpw</span><span class="p">(</span><span class="n">pw</span><span class="p">,</span> <span class="n">user_pw_hash</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">check</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                <span class="n">resp</span> <span class="o">=</span> <span class="nf">make_response</span><span class="p">(</span><span class="s">'로그인 성공'</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">resp</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"잘못된 비밀번호입니다."</span><span class="p">)</span>                
        <span class="k">else</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"존재하지 않는 계정입니다."</span><span class="p">)</span>
        <span class="k">return</span> <span class="nf">render_template</span><span class="p">(</span><span class="s">'login.html'</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">app</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></table></code></div></div><p><br /></p><p>문자열인 비밀번호를 bcrypt 라이브러리에서 사용하기 위해서는 utf-8 방식의 바이트 인코딩이 필요하다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pw = pw.encode('utf-8')
</pre></table></code></div></div><p><br /></p><p>인코딩한 비밀번호는 아래와 같이 해싱한다. gensalt()를 통해 salt 값을 생성하고, hashpw()에 비밀번호와 salt를 인자로 받아 암호화된 비밀번호를 생성한다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">bcrypt_hash</span> <span class="o">=</span> <span class="n">bcrypt</span><span class="p">.</span><span class="nf">hashpw</span><span class="p">(</span><span class="n">pw</span><span class="p">,</span> <span class="n">bcrypt</span><span class="p">.</span><span class="nf">gensalt</span><span class="p">())</span>
</pre></table></code></div></div><p><br /></p><p>해싱된 비밀번호를 DB에 저장할 때는 현재 바이트인 해싱 비밀번호를 다시 유니코드로 바꿔줘야 한다. 이를 위해 인코딩 때와 동일하게 utf-8 방식으로 디코드 해준다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">decode_hash</span> <span class="o">=</span> <span class="n">bcrypt_hash</span><span class="p">.</span><span class="nf">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
</pre></table></code></div></div><p><br /></p><p>회원가입을 마치고 DB 데이터를 확인해보면 다음과 같이 입력한 비밀번호가 bcrypt 암호화를 거쳐 저장된 것을 볼 수 있다.</p><p><img data-src="https://user-images.githubusercontent.com/40850499/185931378-c46d2766-df1c-493c-ab32-f0b0a09a1509.png" alt="1" data-proofer-ignore></p><p><br /></p><p>입력한 비밀번호와 DB에 저장되어 있는 bcrypt 암호화된 비밀번호가 일치하는지 확인한다. 일치 여부는 True / False로 반환된다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">check</span> <span class="o">=</span> <span class="n">bcrypt</span><span class="p">.</span><span class="nf">checkpw</span><span class="p">(</span><span class="n">pw</span><span class="p">,</span> <span class="n">user_pw_hash</span><span class="p">)</span>
</pre></table></code></div></div><p><br /></p><p><br /></p><h1 id="jwt-json-web-token">JWT (Json Web Token)</h1><hr /><p>사용자가 로그인을 하면 서버에서 발행해주는 토큰을 가지고 브라우저의 저장소에 토큰을 유지시키는 방식을 토큰 방식이라고 한다. 여기에서 사용되는 토큰이 바로 JWT이다.</p><p><br /></p><h3 id="구조"><span class="mr-2">구조</span><a href="#구조" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><hr /><p><img data-src="https://user-images.githubusercontent.com/40850499/185931437-188f150e-3338-4336-a1aa-d7c1b1ea0bb6.png" alt="3" data-proofer-ignore></p><p>JWT는 위 그림과 같이 .으로 구분하여 3파트로 나누어진다.</p><ul><li><p>Header</p><ul><li><p>토큰의 유형</p><li><p>해시 암호화 알고리즘 (HMAC, SHA256, RSA)</p></ul><li><p>Payload</p><ul><li><p>토큰에 담을 클레임(claim) 정보</p><ul><li><p>Payload에 담는 정보의 한 ‘조각’을 클레임이라 부르고, name / value의 한 쌍으로 이루어져 있다. 토큰에는 여러개의 클레임을 넣을 수 있다.</p><li><p>아이디, 비밀번호 등의 개인정보가 아닌 토큰의 발급일과 만료일자 등의 내용을 담는다.</p></ul></ul><li><p>Signature</p><ul><li>Header와 Payload를 합친 후 서버에서 지정한 secret key로 암호화시켜 토큰을 변조하기 어렵게 만들어준다.</ul></ul><p><br /></p><h3 id="인증-과정"><span class="mr-2">인증 과정</span><a href="#인증-과정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><hr /><p><img data-src="https://user-images.githubusercontent.com/40850499/185931503-bad1e7ef-8242-447c-b055-63fb677bb1be.png" alt="2" data-proofer-ignore></p><p><br /></p><h3 id="세션-방식"><span class="mr-2">세션 방식</span><a href="#세션-방식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><hr /><p>세션 방식은 서버의 메모리, 데이터베이스와 같은 서버의 자원들을 사용해서 사용자의 정보를 유지시키는 방식이다.</p><p><br /></p><p><strong>세션 방식 인증 과정</strong></p><ol><li><p>사용자 로그인</p><li><p>서버에서는 계정정보를 읽어 사용자를 확인한 후, 사용자의 고유한 ID값을 부여하여 세션 저장소에 저장하고, 이와 연결되는 세션ID를 발행한다.</p><li><p>사용자는 서버에서 해당 세션ID를 받아 쿠키에 저장한 후, 인증이 필요한 요청마다 쿠키를 헤더에 실어 보낸다.</p><li><p>서버는 쿠키 내부의 세션ID를 통해 세션 내부에 일치하는 유저 정보를 가져와 처음 로그인한 유저가 맞는지 확인한다.</p></ol><p><br /></p><p><strong>세션 방식의 문제점</strong></p><p>세션은 서버의 메모리 내부에 저장되기 때문에 세션의 양이 많아질 수록 메모리에 부하가 걸릴 수 있으며 쿠키와 세션의 정보가 유출되면 보안의 위험이 있다. 이러한 문제점을 해결하고자 고안된 것이 JWT이다.</p><p><br /></p><h3 id="jwt-인증-기반-로그인-실습"><span class="mr-2">JWT 인증 기반 로그인 실습</span><a href="#jwt-인증-기반-로그인-실습" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><hr /><p><strong>.env</strong></p><p>JWT 토큰 생성에는 payload와 secret key가 필요하다. 본인은 “RAINBOW”로 secret key를 설정하였다.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>HOST=localhost
USER=mysql ID
PASSWD=mysql ID의 암호
DB=접속할 데이터베이스
SECRET_KEY=RAINBOW
</pre></table></code></div></div><p><br /></p><p><strong>app.py</strong></p><ul><li>PyJWT version 2.4.0</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">make_response</span>
<span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="n">pymysql</span>
<span class="kn">import</span> <span class="n">bcrypt</span>
<span class="kn">import</span> <span class="n">jwt</span>

<span class="n">app</span> <span class="o">=</span> <span class="nc">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="n">HOST</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="s">'HOST'</span><span class="p">)</span>
<span class="n">USER</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="s">'USER'</span><span class="p">)</span>
<span class="n">PASSWD</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="s">'PASSWD'</span><span class="p">)</span>
<span class="n">DB</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="s">'DB'</span><span class="p">)</span>
<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="nf">getenv</span><span class="p">(</span><span class="s">'SECRET_KEY'</span><span class="p">)</span>

<span class="n">db</span> <span class="o">=</span> <span class="n">pymysql</span><span class="p">.</span><span class="nf">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">HOST</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">USER</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="n">PASSWD</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="n">DB</span><span class="p">,</span> <span class="n">charset</span><span class="o">=</span><span class="s">"utf8"</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">'/'</span><span class="p">,</span> <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">render_template</span><span class="p">(</span><span class="s">'register.html'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="nf">cursor</span><span class="p">()</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'user_id'</span><span class="p">)</span>
        <span class="n">pw</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'user_pw'</span><span class="p">)</span>
        <span class="n">pw</span> <span class="o">=</span> <span class="n">pw</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
        <span class="n">bcrypt_hash</span> <span class="o">=</span> <span class="n">bcrypt</span><span class="p">.</span><span class="nf">hashpw</span><span class="p">(</span><span class="n">pw</span><span class="p">,</span><span class="n">bcrypt</span><span class="p">.</span><span class="nf">gensalt</span><span class="p">())</span>
        <span class="n">decode_hash</span> <span class="o">=</span> <span class="n">bcrypt_hash</span><span class="p">.</span><span class="nf">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
        <span class="n">sql</span> <span class="o">=</span> <span class="s">"INSERT INTO user (id, pw) values ('%s','%s')"</span> <span class="o">%</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">decode_hash</span><span class="p">)</span>
        <span class="n">cur</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
        <span class="n">db</span><span class="p">.</span><span class="nf">commit</span><span class="p">()</span>
        <span class="n">cur</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>

        <span class="k">return</span> <span class="nf">redirect</span><span class="p">(</span><span class="s">'/login'</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s">'/login'</span><span class="p">,</span> <span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s">'GET'</span><span class="p">,</span><span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'GET'</span><span class="p">:</span>
        <span class="k">return</span> <span class="nf">render_template</span><span class="p">(</span><span class="s">'login.html'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'user_id'</span><span class="p">)</span>
        <span class="n">pw</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="s">'user_pw'</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">db</span><span class="p">.</span><span class="nf">cursor</span><span class="p">()</span>
        <span class="n">cur</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s">'SELECT * FROM user WHERE id = %s'</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">cur</span><span class="p">.</span><span class="nf">fetchone</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">user_id</span><span class="p">:</span>
            <span class="n">cur</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s">'SELECT pw FROM user WHERE id = %s'</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span>
            <span class="n">select_pw</span> <span class="o">=</span> <span class="n">cur</span><span class="p">.</span><span class="nf">fetchone</span><span class="p">()</span>
            <span class="n">user_pw_hash</span> <span class="o">=</span> <span class="n">select_pw</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">pw</span> <span class="o">=</span> <span class="n">pw</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
            <span class="n">user_pw_hash</span> <span class="o">=</span> <span class="n">user_pw_hash</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">)</span>
            <span class="n">check</span> <span class="o">=</span> <span class="n">bcrypt</span><span class="p">.</span><span class="nf">checkpw</span><span class="p">(</span><span class="n">pw</span><span class="p">,</span> <span class="n">user_pw_hash</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">check</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s">'id'</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span>
                    <span class="s">'exp'</span><span class="p">:</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="nf">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
                <span class="p">}</span>
                <span class="n">access_token</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">SECRET_KEY</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>
                <span class="n">resp</span> <span class="o">=</span> <span class="nf">make_response</span><span class="p">(</span><span class="s">'로그인 성공'</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">resp</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"잘못된 비밀번호입니다."</span><span class="p">)</span>                
        <span class="k">else</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"존재하지 않는 계정입니다."</span><span class="p">)</span>
        <span class="k">return</span> <span class="nf">render_template</span><span class="p">(</span><span class="s">'login.html'</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">app</span><span class="p">.</span><span class="nf">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></table></code></div></div><p><br /></p><p>payload를 설정해준다. exp는 토큰의 유효 시간을 나타낸다. 아래 코드는 토큰 만료 시간을 하루로 지정하였음을 의미한다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'id'</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span>
    <span class="s">'exp'</span><span class="p">:</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">utcnow</span><span class="p">()</span> <span class="o">+</span> <span class="nf">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="p">}</span>
</pre></table></code></div></div><p><br /></p><p>jwt.encode() 함수에 설정한 payload와 secret key를 넣고 사용할 암호화 방식을 선택하여 토큰을 생성한다. JWT에 주로 사용되는 암호화 알고리즘으로는 HS256(대칭키 방식)과 RS256(공개키 방식)이 있으며, 해당 코드에서는 HS256 알고리즘을 사용하였다.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">access_token</span> <span class="o">=</span> <span class="n">jwt</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">SECRET_KEY</span><span class="p">,</span> <span class="n">algorithm</span><span class="o">=</span><span class="s">'HS256'</span><span class="p">)</span>
</pre></table></code></div></div><p><br /></p><h1 id="참고">참고</h1><hr /><p><a href="https://blog.naver.com/PostView.naver?blogId=wldks79&amp;logNo=222272099807">비밀번호 암호화 Bcrypt (gensalt, hashpw, checkpw) : 네이버 블로그</a></p><p>https://youngseokim-kr.github.io/backend/backend01/</p><p><a href="http://www.opennaru.com/opennaru-blog/jwt-json-web-token/">JWT (JSON Web Token) 이해하기와 활용 방안 - Opennaru, Inc.</a></p><p>https://velog.io/@kingth/서버-인증-방식세션쿠키-토큰</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/web/'>Web</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/flask/" class="post-tag no-text-decoration" >Flask</a> <a href="/tags/bcrypt/" class="post-tag no-text-decoration" >Bcrypt</a> <a href="/tags/jwt/" class="post-tag no-text-decoration" >JWT</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Flask] Bcrypt를 이용한 비밀번호 암호화 &amp; JWT 인증 기반 로그인 - SCP Tech Blog&amp;url=https://teamscp.github.io/posts/Flask_Bcrypt_JWT/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Flask] Bcrypt를 이용한 비밀번호 암호화 &amp; JWT 인증 기반 로그인 - SCP Tech Blog&amp;u=https://teamscp.github.io/posts/Flask_Bcrypt_JWT/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://teamscp.github.io/posts/Flask_Bcrypt_JWT/&amp;text=[Flask] Bcrypt를 이용한 비밀번호 암호화 &amp; JWT 인증 기반 로그인 - SCP Tech Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/About_SCP/">About_SCP</a><li><a href="/posts/BruteForce/">Brute Force</a><li><a href="/posts/SQL-injection/">SQL Injection </a><li><a href="/posts/Stack_Frame/">스택(Stack)과 스택 프레임(Stack Frame)</a><li><a href="/posts/FSB/">FSB</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/apihooking/">APIHooking</a> <a class="post-tag" href="/tags/bcrypt/">Bcrypt</a> <a class="post-tag" href="/tags/bitcoin/">bitcoin</a> <a class="post-tag" href="/tags/blockchain/">blockchain</a> <a class="post-tag" href="/tags/brute-force/">Brute Force</a> <a class="post-tag" href="/tags/flask/">Flask</a> <a class="post-tag" href="/tags/fsb/">FSB</a> <a class="post-tag" href="/tags/hackrf/">HackRF</a> <a class="post-tag" href="/tags/jwt/">JWT</a> <a class="post-tag" href="/tags/promotion/">promotion</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/SQL-injection/"><div class="card-body"> <em class="timeago small" data-ts="1661644800" > 2022-08-28 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>SQL Injection</h3><div class="text-muted small"><p> SQL Injection 1. SQL Injection 공격이란? SQL: DB에 명령 내릴 때 쓰는 언어 Injection: 삽입 임의의 SQL문을 삽입하고 실행시켜 데이터 베이스가 비정상적인 동작을 하도록 조작하는 행위이다. 2. SQL Injection 공격의 목적 1. DB에 임의의 SQL명령 실행 2. DB의 데이터를 추출 3. 인증...</p></div></div></a></div><div class="card"> <a href="/posts/BruteForce/"><div class="card-body"> <em class="timeago small" data-ts="1663027200" > 2022-09-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Brute Force</h3><div class="text-muted small"><p> Brute Force 이란? 영어로 Brute 는 “짐승 같은,난폭한”이라는 뜻이고, Brute Force는 “난폭한 힘,폭력”이라는 뜻으로 조합 가능한 모든 문자열을 하나씩 대입하여 암호를 해독하는 방법이다. Brute Force 장점 이론적으로 가능한 모든 경우의 수를 다 검색해 보는 것이라 정확도 100%가 항상 보장된다. 또한 브루트 포스의...</p></div></div></a></div><div class="card"> <a href="/posts/About_SCP/"><div class="card-body"> <em class="timeago small" data-ts="1662422400" > 2022-09-06 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>About_SCP</h3><div class="text-muted small"><p> About_SCP 소개말 중부대학교 SCP 동아리는 정보보호학과 유승재 교수님의 지도하의 정보보호 연구 동아리입니다. 1998년 정보보호 창업 동아리 Soul Magic으로 창설해, 2005년 Security Check Point의 약자인 S.C.P로 바꾸어 활동하고 있습니다. S.C.P는 중부대학교 고양캠퍼스 세종관 804호에 위치하고 있으며 동...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/HackRF_Introduce/" class="btn btn-outline-primary" prompt="Older"><p>[전파해킹] HackRF 소개와 환경 구축 (우분투)</p></a> <a href="/posts/WriteFile_API_hooking/" class="btn btn-outline-primary" prompt="Newer"><p>메모장 WriteFile() API 후킹</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="">SCP</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/apihooking/">APIHooking</a> <a class="post-tag" href="/tags/bcrypt/">Bcrypt</a> <a class="post-tag" href="/tags/bitcoin/">bitcoin</a> <a class="post-tag" href="/tags/blockchain/">blockchain</a> <a class="post-tag" href="/tags/brute-force/">Brute Force</a> <a class="post-tag" href="/tags/flask/">Flask</a> <a class="post-tag" href="/tags/fsb/">FSB</a> <a class="post-tag" href="/tags/hackrf/">HackRF</a> <a class="post-tag" href="/tags/jwt/">JWT</a> <a class="post-tag" href="/tags/promotion/">promotion</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
